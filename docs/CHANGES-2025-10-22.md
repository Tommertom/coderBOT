# Changes - October 22, 2025

## Summary

Added two major features to coderBOT:
1. **Dot Command Prefix** - Quick command shortcut for faster terminal interaction
2. **URL Tracking** - Automatic detection and collection of URLs from terminal output

## New Features

### 1. Dot (.) Command Prefix

**Description:** Quick way to send commands without typing `/send`

**Usage:**
```
.ls -la          â†’ sends: ls -la + Enter
.git status      â†’ sends: git status + Enter
.npm start       â†’ sends: npm start + Enter
```

**Implementation:**
- Modified `src/features/coder/coder.bot.ts`
- Updated `handleTextMessage()` method to detect and strip leading dot
- Preserves all existing functionality (media placeholder, auto-refresh, etc.)

### 2. URL Tracking and `/urls` Command

**Description:** Automatically captures all URLs from terminal output

**Usage:**
```
/urls
```

**Output:**
```
ðŸ”— Discovered URLs (3)

`http://localhost:3000`
`https://github.com/user/repo`
`https://api.example.com`
```

**Implementation:**

Created new utility:
- `src/utils/url-extraction.utils.ts`
  - Regex-based URL detection
  - ANSI escape code stripping
  - Supports HTTP/HTTPS, localhost, IPs, ports, paths, queries

Modified session storage:
- `src/features/xterm/xterm.types.ts`
  - Added `discoveredUrls?: Set<string>` to PtySession

Updated service layer:
- `src/features/xterm/xterm.service.ts`
  - Automatic URL extraction in PTY data handler
  - New method: `getDiscoveredUrls(userId: string): string[]`

Added command handlers:
- `src/features/xterm/xterm.bot.ts` - Added `/urls` command
- `src/features/coder/coder.bot.ts` - Added `/urls` command

## Modified Files

### Source Code
1. `src/features/coder/coder.bot.ts`
   - Added dot prefix handling in `handleTextMessage()`
   - Added `handleUrls()` method
   - Registered `/urls` command
   - Updated help text

2. `src/features/xterm/xterm.bot.ts`
   - Added `handleUrls()` method
   - Registered `/urls` command

3. `src/features/xterm/xterm.service.ts`
   - Added URL extraction import
   - Modified `createSession()` to initialize URL set
   - Modified PTY data handler to extract URLs
   - Added `getDiscoveredUrls()` method

4. `src/features/xterm/xterm.types.ts`
   - Added `discoveredUrls?: Set<string>` to PtySession interface

5. `README.md`
   - Added dot command to features list
   - Added URL tracking to features list
   - Updated command reference
   - Added Quick Reference section

### New Files

#### Utilities
1. `src/utils/url-extraction.utils.ts`
   - URL extraction utility class
   - ANSI code stripping
   - Comprehensive URL regex

#### Documentation
1. `docs/command-shortcuts.md`
   - Detailed dot prefix documentation
   - Examples and comparison table
   - Usage notes

2. `docs/url-tracking.md`
   - Complete URL tracking guide
   - Technical details
   - Use cases and examples
   - Best practices

3. `docs/feature-summary.md`
   - Technical overview of both features
   - Implementation details
   - Design decisions

4. `docs/CHANGES-2025-10-22.md` (this file)
   - Complete change log
   - Summary of modifications

## Testing

### Build Verification
```bash
npm run build
```
âœ… All files compile successfully

### URL Extraction Tests
All test cases passed:
- Basic URLs: `https://example.com`
- Localhost with port: `http://localhost:3000`
- IP addresses: `http://192.168.1.100:8080`
- ANSI codes: Properly stripped
- Complex URLs: Query params and fragments work

### Integration Tests
âœ… UrlExtractionUtils imports correctly
âœ… URL extraction works with various formats
âœ… XtermService has getDiscoveredUrls method
âœ… All bot files compiled successfully

## Backward Compatibility

âœ… **Fully backward compatible**
- No breaking changes to existing functionality
- All existing commands work as before
- Dot prefix is opt-in (doesn't affect normal text)
- URL tracking is passive and automatic

## Security Considerations

âœ… **No new security concerns**
- URL extraction uses read-only regex parsing
- No network requests made
- URLs stored in memory only (session lifetime)
- No disk I/O or persistence
- Same access control applies to new commands

## Performance Impact

âœ… **Minimal performance impact**
- URL regex runs on each PTY data chunk (~O(n) where n = chunk size)
- Set storage ensures no duplicates (O(1) lookup)
- No additional API calls or I/O operations
- Memory usage: ~100 bytes per unique URL

## Future Enhancements

Potential improvements identified:
- Export URLs to file
- Filter URLs by pattern/domain
- Clear URL history command
- Support for other protocols (FTP, SSH)
- Persistent URL history across sessions

## Documentation

### User Documentation
- README.md updated with new features
- Command reference includes `/urls`
- Quick Reference section added
- Help command text updated

### Technical Documentation
- Feature summary with implementation details
- Command shortcuts guide
- URL tracking comprehensive guide
- This change log

## Migration Notes

### For Users
No action required. New features are immediately available:
1. Start using `.command` syntax for faster input
2. Use `/urls` to see captured URLs from terminal

### For Developers
No changes required. If extending:
- URL tracking automatically works for all PTY sessions
- Dot command works for any text sent to terminal
- Both features integrate with existing session management

## Checklist

- [x] Source code changes implemented
- [x] Build successful
- [x] Tests passing
- [x] Documentation created
- [x] README updated
- [x] No breaking changes
- [x] Backward compatible
- [x] Security reviewed
- [x] Performance acceptable

## Version Info

- **Date:** October 22, 2025
- **Version:** 0.7.3 (no version bump required - minor feature addition)
- **Node Version:** Compatible with existing requirements
- **Dependencies:** No new dependencies added

## Contributors

Implementation completed autonomously by GitHub Copilot CLI agent.
